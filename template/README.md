# react-base

### ä»‹ç»
react-baseæ¶æ„é…ç½®åŒ…æ‹¬apiã€routerã€storeã€layoutsç­‰
æœ¬é¡¹ç›®é‡‡ç”¨reactæŠ€æœ¯ä¸ºåŸºç¡€å¼€å‘è€…æ²¡æœ‰ç‰¹æ®Šä¸šåŠ¡æƒ…å†µä¸€å¾‹é‡‡ç”¨react hooksæ–¹æ³•å¼€å‘ã€‚

### ç‰ˆæœ¬é¡»çŸ¥
ï¼ˆè¯¥éƒ¨åˆ†æ˜¯é’ˆå¯¹å½“å‰é¡¹ç›®å¼€å‘æˆ–è€…ä½¿ç”¨çš„åº“æˆ–è€…ç¯å¢ƒçš„ç‰ˆæœ¬å£°æ˜ï¼‰
1. Node v10.x
2. React v16.x

### è½¯ä»¶æ¶æ„
æœ¬é¡¹ç›®è‡´åŠ›äºé¢å‘ä¼ä¸šå•ä½åŠå¤§ä¼—ç”¨æˆ·ï¼Œå› æ­¤æ¶æ„è¯¥é¡¹ç›®æ—¨åœ¨äº§å“æ€§èƒ½ï¼Œç”¨æˆ·ä½“éªŒï¼Œå¯ç»´æŠ¤æ€§ï¼Œå®‰å…¨æ€§ï¼Œå¯è¯»æ€§ç­‰ã€‚

1. æŠ€æœ¯é€‰å‹ã€‚æ ¹æ®ä¸šåŠ¡å‘å±•å’Œå›¢é˜Ÿå‘å±•å†³å®šé‡‡ç”¨äº† React æŠ€æœ¯æ ˆï¼ŒReact æŠ€æœ¯æ˜¯ç›®å‰å‰ç«¯æœ€æµè¡Œçš„æŠ€æœ¯ï¼Œä¹Ÿæ˜¯ç›®å‰åº”ç”¨æœ€å¹¿çš„æŠ€æœ¯å¹¶ä¸” React ç¤¾åŒºä¹Ÿç›¸å¯¹æ´»è·ƒï¼ŒåŸºæœ¬ä¸Šæˆ‘ä»¬çš„é¡¹ç›®åœ¨ React ç›¸å…³é—®é¢˜ä¸Šå¯ä»¥è¿åˆƒè€Œè§£ã€‚

   æœ¬é¡¹ç›®æŠ€æœ¯æ ˆåŸºäº [ES6]ã€[React]ã€[React-Router]ã€[Redux]ã€[redux-thunk]ã€[Webpack] [Ant Design] [typescript] [Scss]ç­‰ã€‚

   <span style="color: rgb(184,49,47);">ç‚¹å‡»åç§°å¯è·³è½¬ç›¸å…³ç½‘ç«™ ğŸ˜„ğŸ˜„</span>

- [React](https://facebook.github.io/react/)
- [React-Router](http://react-guide.github.io/react-router-cn/docs/API.html)
- [Redux](https://redux.js.org/)
- [redux-thunk](https://github.com/reduxjs/redux-thunk)
- [axios](http://www.axios-js.com/)
- [Webpack](https://webpack.js.org/)
- [Ant Design](https://ant.design/)
- [typescript](https://www.tslang.cn/)

2. è„šæ‰‹æ¶ã€‚é‡‡ç”¨çš„æ˜¯`create-react-app`å®˜æ–¹å®šåˆ¶çš„è„šæ‰‹æ¶ï¼Œæ­å»ºé¡¹ç›®ï¼Œå¹¶ä¸”ä¹Ÿå®ç°äº†å‰åç«¯åˆ†ç¦»ï¼Œåº•å±‚ä¹Ÿå®ç°äº† MVC çš„è®¾è®¡æ¨¡å¼ã€‚
3. å¼€å‘è§„èŒƒã€‚é¡¹ç›®é‡‡ç”¨ Eslint å’Œ prettier æ¥çº¦æŸå¼€å‘æ—¶çš„åŸºæœ¬è§„èŒƒã€‚é¡¹ç›®ä¸¥æ ¼éµå®ˆ**CodeReview**è§„èŒƒï¼Œåšåˆ°åŠæ—¶å®¡æ ¸åŠæ—¶åé¦ˆç­‰æ•ˆæœã€‚
4. å¼€å‘å·¥å…·ã€‚ç»Ÿä¸€é‡‡ç”¨ Vscode è¿›è¡Œå¼€å‘ã€‚
5. ç¯å¢ƒç®¡ç†ã€‚ç»Ÿä¸€é‡‡ç”¨.env æ–‡ä»¶æ–¹å¼ç®¡ç†ç¯å¢ƒï¼ŒåŸºæœ¬ä¿æŒæœ‰ development å’Œ production ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚è‡ªå®šä¹‰ç¯å¢ƒã€‚
6. å¼€å‘æµç¨‹ç®¡ç†ã€‚é¡¹ç›®é€šè¿‡ gitee ç äº‘ä»“åº“æ¥å­˜å‚¨ä»£ç ï¼Œå¹¶é€šè¿‡ jenkins ä¸€é”®éƒ¨ç½²æµ‹è¯•å’Œçº¿ä¸Šç¯å¢ƒç­‰ã€‚
7. æ€§èƒ½æµ‹è¯•ã€‚å‹åŠ›æµ‹è¯•ï¼Œåœ¨çº¿é”™è¯¯æ”¶é›†ï¼ˆå¦ï¼‰ï¼Œmock ç³»ç»Ÿç­‰ï¼ˆåæœŸå¼•å…¥ï¼‰
8. envç¯å¢ƒã€‚é€šè¿‡ dotenv æ’ä»¶é…ç½®envç¯å¢ƒ

### åŸºç¡€æŒæ¡

 1.  åŸºäºnodeåŸºç¡€å¼€å‘ï¼Œéœ€è¦æŒæ¡nodeçš„åŸºç¡€ã€‚åŒæ—¶ä½¿ç”¨çš„æ˜¯yarnåŠ è½½æ¨¡å—èµ„æºåŒ…ï¼Œéœ€è¦äº†è§£yarnçš„ä½¿ç”¨è§„åˆ™ã€‚ä½¿ç”¨çš„IDEä¸ºå¾®è½¯çš„VSCodeï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦æŒæ¡VSCodeè½¯ä»¶ã€‚

 2.  æœ¬ç‰ˆæœ¬é‡‡ç”¨çš„æ¡†æ¶ä¸ºreactï¼Œ16.13.1ç‰ˆæœ¬ï¼Œéœ€è¦æŒæ¡reactå¼€å‘æŠ€æœ¯åŸºç¡€ã€‚å¹¶ä¸”éœ€æŒæ¡16.xç‰ˆæœ¬æ–°å¢ç‰¹æ€§ï¼Œä¾‹å¦‚hookç‰¹æ€§ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½é‡ä½¿ç”¨å‡½æ•°ç¼–ç¨‹ï¼Œä¾¿äºä¼˜åŒ–å‰ç«¯æ€§èƒ½ã€‚

 3.  åŒæ—¶æœ¬ç‰ˆæœ¬ä½¿ç”¨äº†Typescriptç¼–ç¨‹ï¼Œéœ€è¦å­¦ä¹ å’Œäº†è§£Typescriptçš„è¯­è¨€ç‰¹ç‚¹å’Œä½¿ç”¨è§„åˆ™ã€‚

 4.  éœ€è¦æŒæ¡reduxã€redux-thunkçš„åŸºæœ¬çŸ¥è¯†ï¼Œæ‡‚å¾—é¡¹ç›®è·¯ç”±å’Œæ•°æ®æ˜¯å¦‚ä½•ä¼ é€’å’Œå·¥ä½œçš„ã€‚

 5.  å¯¹æ¥æ•°æ®æ¥å£APIä½¿ç”¨çš„æ˜¯Axiosï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦äº†è§£Axiosçš„çŸ¥è¯†è¦ç‚¹ã€‚

    Ps.åœ¨ä½¿ç”¨reduxæ¨¡å—å¯¹æ•°æ®ç®¡ç†å¼€å‘çš„è¿‡ç¨‹ï¼Œéœ€è¦åœ¨æµè§ˆå™¨ä¸­å®‰è£…æ’ä»¶ï¼š[https://github.com/zalmoxisus/redux-devtools-extension](https://github.com/zalmoxisus/redux-devtools-extension)

### ç›®å½•
```
â”œâ”€â”€ commitlint.config.js                   //commit-msgè§„åˆ™é…ç½®
â”œâ”€â”€ config-overrides.js                    //webpackæ‰©å±•é…ç½®
â”œâ”€â”€ package.json
â”œâ”€â”€ paths.json                             //aliasè·¯å¾„
â”œâ”€â”€ .prettierrc.js                         //perttierrcé…ç½®æ–‡ä»¶
â”œâ”€â”€ .eslintrc.js                           //eslinté…ç½®æ–‡ä»¶
â”œâ”€â”€ public
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ manifest.json
â”‚   â””â”€â”€ robots.txt
â”œâ”€â”€ README.md
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ api
â”‚   â”‚   â”œâ”€â”€ apiConfig
â”‚   â”‚   â”‚   â”œâ”€â”€ apiBase.ts                  //apiåŸºç¡€é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ axios.ts                    //axioså°è£…
â”‚   â”‚   â”‚   â””â”€â”€ interface.ts
â”‚   â”‚   â””â”€â”€ apiServer
â”‚   â”‚       â””â”€â”€ apiUser.ts                  //apiæ¥å£
â”‚   â”œâ”€â”€ App.test.tsx
â”‚   â”œâ”€â”€ App.tsx                             //Appå¯ä½œä¸ºé¡¶å±‚æ‹¦æˆªé¡µé¢ï¼ˆå¦‚ç™»å½•ä¿¡æ¯ã€è·¯ç”±ã€tokenç­‰æ‹¦æˆªè®¾ç½®ï¼‰
â”‚   â”œâ”€â”€ assets
â”‚   â”œâ”€â”€ components
â”‚   â”œâ”€â”€ index.tsx
â”‚   â”œâ”€â”€ layouts                              //å¸ƒå±€æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ BasicLayout
â”‚   â”‚   â”‚   â”œâ”€â”€ BasicLayout.module.scss
â”‚   â”‚   â”‚   â””â”€â”€ BasicLayout.tsx
â”‚   â”‚   â”œâ”€â”€ FullLayout
â”‚   â”‚   â”‚   â””â”€â”€ FullLayout.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ pages
â”‚   â”‚   â”œâ”€â”€ home
â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”œâ”€â”€ hooksDemo                        //react hooks demoæ–‡ä»¶ä¾¿å‚è€ƒä½¿ç”¨
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ providerHoc.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ store.tsx
â”‚   â”‚   â”‚   â””â”€â”€ useImperativeHandle.tsx
â”‚   â”‚   â””â”€â”€ notFound
â”‚   â”‚       â””â”€â”€ index.tsx
â”‚   â”œâ”€â”€ react-app-env.d.ts
â”‚   â”œâ”€â”€ routes                              //è·¯ç”±é…ç½®æ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ config.ts
â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”œâ”€â”€ serviceWorker.ts
â”‚   â”œâ”€â”€ setupTests.ts
â”‚   â”œâ”€â”€ store                               //storeé…ç½®æ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”œâ”€â”€ reducers.tsx
â”‚   â”‚   â””â”€â”€ user
â”‚   â”‚       â”œâ”€â”€ actions.tsx
â”‚   â”‚       â”œâ”€â”€ constants.tsx
â”‚   â”‚       â””â”€â”€ userReducer.tsx
â”‚   â”œâ”€â”€ styles                              //å…¬å…±æ ·å¼æ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ antdTheme.js
â”‚   â”‚   â”œâ”€â”€ global.scss
â”‚   â”‚   â””â”€â”€ normalize.css
â”‚   â”œâ”€â”€ typings                             //ts å£°æ˜æ–‡ä»¶å¤¹
â”‚   â””â”€â”€ utils                               //å…¬å…±å·¥å…·æ–‡ä»¶å¤¹
â”œâ”€â”€ tsconfig.json                           //tsé…ç½®æ–‡ä»¶
â”œâ”€â”€ .env.development                        //æµ‹è¯•ç¯å¢ƒ envé…ç½®æ–‡ä»¶ 
â”œâ”€â”€ .env.production                         //ç”Ÿäº§ç¯å¢ƒ envé…ç½®æ–‡ä»¶   
â”œâ”€â”€ .env.development.local                  //æœ¬åœ°ç¯å¢ƒ envé…ç½®æ–‡ä»¶ 
â””â”€â”€ yarn.lock

```

### é¡¹ç›®ä½¿ç”¨è¯´æ˜ã€ç›¸å…³é…ç½®ã€å·¥å…·ç³»åˆ—åŠç‰¹æ®Šè¯´æ˜

ï¼ˆè¯¥éƒ¨åˆ†æ˜¯é’ˆå¯¹é¡¹ç›® webpack æˆ–è€…å…¶ä»–é…ç½®ç‰¹æ„è¯´æ˜ï¼Œä¾¿äºå…¶ä»–äººç†è§£å’ŒçŸ¥æ™“ï¼‰

#### <span id="ç›®å½•">ç›®å½•</span>

- [âˆš ä½¿ç”¨è¯´æ˜](#-ä½¿ç”¨è¯´æ˜)
- [âˆš ç¯å¢ƒå˜é‡é…ç½®](#-ç¯å¢ƒå˜é‡é…ç½®)
- [âˆš webpacké…ç½®](#-webpacké…ç½®)
- [âˆš è·¯ç”±ç»“æ„](#-è·¯ç”±ç»“æ„)
- [âˆš éƒ¨åˆ†æ’ä»¶è¯´æ˜](#-éƒ¨åˆ†æ’ä»¶è¯´æ˜)

#### <span id="-ä½¿ç”¨è¯´æ˜">â˜ ä½¿ç”¨è¯´æ˜</span>

```

1.  yarn install å®‰è£…æ‰€æœ‰åŒ…
2.  npm run start è¿è¡Œå¼€å‘ç¯å¢ƒ
3.  npm run build:dev æ‰“åŒ…æµ‹è¯•ç¯å¢ƒæ–‡ä»¶
4.  npm run build æ‰“åŒ…ç”Ÿæˆç¯å¢ƒæ–‡ä»¶
```

**æ³¨æ„**

> ä½¿ç”¨npm æˆ–è€…yarn éœ€è¦å°†é•œåƒæºåˆ‡æ¢æˆ http://171.217.71.138:4873/

> $ npm config set registry http://171.217.71.138:4873/

[â–² å›ç›®å½•](#ç›®å½•)

### <span id="-ç¯å¢ƒå˜é‡é…ç½®">â˜ ç¯å¢ƒå˜é‡é…ç½®</span>

```
REACT_APP_BASE_URL= https://api.dingdangcode.cn/
REACT_APP_SCRATCH = https://scratch.dingdangcode.cn
REACT_APP_ENV=development
```
[â–² å›ç›®å½•](#ç›®å½•)

### <span id="-webpacké…ç½®">â˜ webpacké…ç½®</span>

```
  //é…ç½®åˆ«å
  addWebpackAlias({
    ['@']: path.resolve(__dirname, 'src')
  })
```

```
  //ä¿®æ”¹ä¸»é¢˜è‰²
  addLessLoader({
    javascriptEnabled: true,
    strictMath: true,
    noIeCompat: true,
    localIdentName: '[local]--[hash:base64:5]',
    //ä¸‹é¢è¿™è¡Œå¾ˆç‰¹æ®Šï¼Œè¿™é‡Œæ˜¯æ›´æ”¹ä¸»é¢˜çš„å…³é”®ï¼Œè¿™é‡Œæˆ‘åªæ›´æ”¹äº†ä¸»è‰²ï¼Œå½“ç„¶è¿˜å¯ä»¥æ›´æ”¹å…¶ä»–çš„ï¼Œä¸‹é¢ä¼šè¯¦ç»†å†™å‡ºã€‚
    modifyVars: {
      '@primary-color': '#8cc7b5'
    }
  })
```
```
 //buildè¾“å‡ºæ–‡ä»¶ä»¶
 const rewiredOutputPath = () => (config, env) => {
    if (env === 'production') {
       const path = require('path');
       const paths = require('react-scripts/config/paths');
       paths.appBuild = path.join(path.dirname(paths.appBuild), 'dist');
       config.output.path = path.join(path.dirname(config.output.path), 'dist');
    }
  return config;
}
```
```
 //antdæŒ‰éœ€åŠ è½½
 fixBabelImports('import', {
    libraryName: 'antd',
    libraryDirectory: 'es',
    style: true
 })
```
```
 //é…ç½®ä¸»é¢˜
 addLessLoader({
    modifyVars: antdTheme,
    javascriptEnabled: true
 })
```

[â–² å›ç›®å½•](#ç›®å½•)

### <span id="-è·¯ç”±ç»“æ„">â˜ è·¯ç”±ç»“æ„</span>
```
const routes: MenuBase[] = [
  // èœå•ç›¸å…³è·¯ç”±
  {
    path: '/',
    name: 'é¦–é¡µ',
    exact: true,
    layout: BasicLayout,
    component: lazy(() => import('@/pages/home'))
  },
  {
    path: '/hooksDemo',
    name: 'hooksDemo',
    exact: true,
    layout: BasicLayout,
    component: lazy(() => import('@/pages/hooksDemo'))
  },
  {
    path: '/404',
    name: '404',
    exact: true,
    component: lazy(() => import('@/pages/notFound'))
  }
];
```

[â–² å›ç›®å½•](#ç›®å½•)

### <span id="-éƒ¨åˆ†æ’ä»¶è¯´æ˜">â˜ éƒ¨åˆ†æ’ä»¶è¯´æ˜</span>

- `eslint-plugin-html`
  &nbsp;&nbsp;&nbsp;&nbsp;ç”¨äº eslint æ£€æµ‹ html æ–‡ä»¶å‡ºé”™

- `babel-plugin-import`
  &nbsp;&nbsp;&nbsp;&nbsp;æŒ‰éœ€åŠ è½½JS å’Œ CSS, babel é…ç½®

- `redux-thunk`
  &nbsp;&nbsp;&nbsp;&nbsp;ä¸­é—´ä»¶ å¼‚æ­¥æ•°æ®æµ

- `eslint-config-prettier`
  &nbsp;&nbsp;&nbsp;&nbsp;prettieræ ¼å¼åŒ–é…ç½®

- `eslint-plugin-prettier`
  &nbsp;&nbsp;&nbsp;&nbsp;Eslint prettieræ ¼å¼åŒ–é…ç½®

- `husky`
  &nbsp;&nbsp;&nbsp;&nbsp;git hooksé’©å­

- `lint-staged`
  &nbsp;&nbsp;&nbsp;&nbsp;git hooksé’©å­ pre-commitæ£€æŸ¥

- `@commitlint/cli"ï¼Œ"@commitlint/config-conventional`
  &nbsp;&nbsp;&nbsp;&nbsp;git commit messageè§„èŒƒæ’ä»¶

- `react-split-pane`
  &nbsp;&nbsp;&nbsp;&nbsp;ç”¨äºå‚ç›´å’Œæ°´å¹³æ‹†åˆ†æ¨¡å—ï¼Œå¹¶å®ç°å‚ç›´å’Œæ°´å¹³æ‹–æ‹½æ¨¡å—

- `axios`
  &nbsp;&nbsp;&nbsp;&nbsp;apiè¯·æ±‚æ’ä»¶

- `react-document-title`
  &nbsp;&nbsp;&nbsp;&nbsp;è·¯ç”±title

- `react-use`
 &nbsp;&nbsp;&nbsp;&nbsp;react hooks çš„ä¸€äº›é€šç”¨æ–¹æ³•

- `dayjs`
  &nbsp;&nbsp;&nbsp;&nbsp;è½»é‡çš„æ—¶é—´è½¬åŒ–æ’ä»¶

- `less-loader: 5.0.0`
  &nbsp;&nbsp;&nbsp;&nbsp;lees-loaderéœ€è¦ç‰ˆæœ¬æ§åˆ¶

- `cos-js-sdk-v5`
  &nbsp;&nbsp;&nbsp;&nbsp;è…¾è®¯cosäº‘å­˜å‚¨sdk
- `dotenv-cli`
  &nbsp;&nbsp;&nbsp;&nbsp;ç”¨äºæ‰§è¡Œenvç¯å¢ƒæ–‡ä»¶

#### è§„èŒƒ
##### [git commit message è§„èŒƒ](./GitCommitè§„èŒƒ.md)

##### [é¡¹ç›®è§„èŒƒ](./é¡¹ç›®è§„èŒƒ.md)
